@*
 * Copyright 2024 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.FrontendAppConfig
@import views.html.components.gds._

@this(
        layout: templates.Layout,
        govukButton: GovukButton,
        h: heading,
        h2: HeadingH2,
        p: paragraphBody,
        bulletList: bulletList,
        paragraphMessageWithLink: ParagraphMessageWithLink,
        sectionBreak: SectionBreak,
        inactiveStatusBanner: InactiveStatusBanner
)

@(organisationName: String, registrationDate: String, plrReference: String, inactiveStatus: Boolean, agentView: Boolean)(implicit request: Request[_], appConfig: FrontendAppConfig, messages: Messages)

    @layout(pageTitle = titleNoForm(if(agentView) messages("dashboard.agent.title") else messages("dashboard.title")), showBackLink = false, maybeClientPillar2Id = if(agentView) Some(plrReference) else None) {

        @if(inactiveStatus) {
            @inactiveStatusBanner()
        }

        @if(agentView) {
            @paragraphMessageWithLink(linkMessage = messages("dashboard.agent.accountLink"), linkUrl = appConfig.asaHomePageUrl)
        }

        @h(if(agentView) messages("dashboard.agent.heading") else messages("dashboard.heading"), "govuk-heading-l govuk-!-margin-bottom-7")

        @p(messages("dashboard.topTaxes", plrReference))
        @p(messages("dashboard.registrationDate", registrationDate))
        @p(messages("dashboard.upe", organisationName), classes = "govuk-body govuk-!-margin-bottom-7")

        @if(agentView) {
            @paragraphMessageWithLink(linkMessage = messages("dashboard.agent.changeClientLink"), linkUrl = routes.AgentController.onPageLoadClientPillarId.url)
        }
        <!--PAY YOUR TUT SECTION-->
        @if(appConfig.showPaymentsSection) {
            @h2(messages("dashboard.payments"), size = "m")
            @p(if(agentView) messages("dashboard.agent.noPayment") else messages("dashboard.noPayment"))
            @paragraphMessageWithLink(linkMessage = messages("dashboard.voluntaryPayment"), linkUrl = controllers.routes.MakeAPaymentDashboardController.onPageLoad.url)

        <!--
        @paragraphMessageWithLink(linkMessage = if(agentView) messages("dashboard.agent.paymentHistory") else messages("dashboard.paymentHistory"), linkUrl = controllers.routes.UnderConstructionController.onPageLoad.url)
        -->

        @paragraphMessageWithLink(linkMessage = messages("dashboard.requestRefund"), linkUrl = controllers.repayments.routes.RequestRefundBeforeStartController.onPageLoad.url)


            @sectionBreak()
        }

        <!--MANAGE YOUR TUT SECTION-->
        @h2(if(agentView) messages("dashboard.agent.manageAccount") else messages("dashboard.manageAccount"), size = "m")
        @paragraphMessageWithLink(linkMessage = messages("dashboard.contactDetails"), linkUrl = controllers.subscription.manageAccount.routes.ManageContactCheckYourAnswersController.onPageLoad.url)
        @paragraphMessageWithLink(linkMessage = messages("dashboard.groupDetails"), linkUrl = controllers.subscription.manageAccount.routes.ManageGroupDetailsCheckYourAnswersController.onPageLoad.url)

        @sectionBreak()

        @if(inactiveStatus) {
            @h2(messages("dashboard.whentoSubmitReturn"), size = "m")
            @p(messages("dashboard.p3"))
            @bulletList(items = List(
                Html(messages("dashboard.whentoSubmitReturn.p1")),
                Html(messages("dashboard.whentoSubmitReturn.p2"))
            ), additionalListClasses = Some("govuk-list--spaced"))
            @sectionBreak()
        }
            @p(messages("dashboard.p1"))
            @paragraphMessageWithLink(linkMessage = messages("dashboard.link"), linkUrl = "https://www.gov.uk/government/consultations/draft-guidance-multinational-top-up-tax-and-domestic-top-up-tax", linkClass = "govuk-link", linkRel = "noopener noreferrer", target = "_blank", message2 = Some(messages("dashboard.p2")))
    }
