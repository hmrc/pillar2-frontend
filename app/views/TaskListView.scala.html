@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.FrontendAppConfig
@this(
    layout: templates.Layout,
    formHelper: FormWithCSRF,
    govukButton: GovukButton
)


@(upeNoIDStatus:String="not started", counter: Int, filingMemberStatus:String)(implicit request: Request[_], appConfig: FrontendAppConfig, messages: Messages)

@layout(
    pageTitle    = titleNoForm(messages("task-list.title")),
    showBackLink = false
) {
    @formHelper(action = routes.IndexController.onSubmit) {
        <h1 class="govuk-heading-xl">@messages("task-list.heading")</h1>

        <h2 class="govuk-heading-s govuk-!-margin-bottom-2">@messages("taskList.subheading.complete")</h2>
        <p class="govuk-body govuk-!-margin-bottom-7">@messages("taskList.completedSections", counter)</p>

        <ol class="app-task-list">
            <li>
                <h2 class="app-task-list__section">
                    <span class="app-task-list__section-number">1. </span>
                    @messages("taskList.task.business.heading")
                </h2>
                <ul class="app-task-list__items">
                    <li class="app-task-list__item">
                        <span class="app-task-list__task-name">
                            @if(upeNoIDStatus == "completed"){
                              <a href="/pillar-two/business-matching/match-hmrc-records" aria-describedby="eligibility-status">
                                 @messages("taskList.task.business.ultimate.edit")
                              </a>
                            } else {
                                <a href="/pillar-two/business-matching/match-hmrc-records" aria-describedby="eligibility-status">
                                 @messages("taskList.task.business.ultimate.add")
                                </a>
                            }
                        </span>
                        @if(upeNoIDStatus == "completed"){
                        <span class="hmrc-status-tag" > @messages("task.status.completed") </span>
                        } else if(upeNoIDStatus == "in progress") {
                        <span class="hmrc-status-tag"> @messages("task.status.inProgress") </span>
                        } else  {
                        <span class="hmrc-status-tag"> @messages("task.status.notStarted") </span>
                        }
                    </li>
                    <li class="app-task-list__item">
                        <span class="app-task-list__task-name">
                        @if(upeNoIDStatus == "completed" && filingMemberStatus == "no") {
                        <a href="/pillar-two/business-matching/filing-member/nominate" aria-describedby="filing-member-status">
                            @messages("taskList.task.business.filingMember.edit")
                        </a>
                        } else if (upeNoIDStatus == "completed") {
                            <a href="/pillar-two/business-matching/filing-member/nominate" aria-describedby="filing-member-status">
                                @messages("taskList.task.business.filingMember.add")
                            </a>
                        } else {
                            @messages("taskList.task.business.filingMember")
                        }

                        </span>
                        @if(filingMemberStatus == "no"){
                            <span class="hmrc-status-tag" > @messages("task.status.completed") </span>
                        } else if(filingMemberStatus == "yes") {
                        <span class="hmrc-status-tag"> @messages("task.status.inProgress") </span>
                        } else  {
                        <span class="hmrc-status-tag"> @messages("task.status.notStarted") </span>
                        }
                    </li>
                    <li class="app-task-list__item">
                        <span class="app-task-list__task-name">
                           @messages("taskList.task.business.more")
                        </span>
                        <span class="hmrc-status-tag"> @messages("task.status.cannotStartYet")</span>
                    </li>
                </ul>
            </li>

            <li>
                <h2 class="app-task-list__section">
                    <span class="app-task-list__section-number">2. </span>
                    @messages("taskList.task.contact.heading")
                </h2>
                <ul class="app-task-list__items">
                    <li class="app-task-list__item">
                        <span class="app-task-list__task-name">
                           @messages("taskList.task.contact")
                        </span>
                        <span class="hmrc-status-tag">@messages("task.status.cannotStartYet")</span>
                    </li>
                </ul>
            </li>

            <li>
                <h2 class="app-task-list__section">
                    <span class="app-task-list__section-number">3. </span>
                    @messages("taskList.task.review.heading")
                </h2>
                <ul class="app-task-list__items">
                    <li class="app-task-list__item">
                        <span class="app-task-list__task-name">
                           @messages("taskList.task.review")
                        </span>
                        <span class="hmrc-status-tag">@messages("task.status.cannotStartYet")</span>
                    </li>
                </ul>
            </li>
        </ol>

    }

}
