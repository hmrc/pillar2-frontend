@*
 * Copyright 2025 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import models.DueAndOverdueReturnBannerScenario.Received
@import views.html.components.gds._

@this(
    h2: HeadingH2,
    link: link,
    paragraphBody: paragraphBody,
    paragraphBodyLink: paragraphBodyLink,
    sectionBreak: SectionBreak
)

@(
    notificationState: DynamicNotificationAreaState,
    isAgent: Boolean
)(implicit messages: Messages)

@maybeAgentKey = @{if(isAgent) ".agent" else ""}

@dueAndOverdueReturnsUrl = @{
    controllers.dueandoverduereturns.routes.DueAndOverdueReturnsController.onPageLoad.url
}

@viewOutstandingPaymentsUrl = @{
    controllers.payments.routes.OutstandingPaymentsController.onPageLoad.url
}

@notificationWrapper(content: Html) = {
    @sectionBreak(id=Some("notifications-break-begin"))
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            @content
        </div>
    </div>
    @sectionBreak(id=Some("notifications-break-end"))
}

@notificationState match {
  case DynamicNotificationAreaState.AccruingInterest(amountOwed) => {
      @notificationWrapper {
          @h2(
              message = messages(s"homepage.dna.accruingInterest$maybeAgentKey.title", formatAmount(amountOwed)),
              size = "s",
              id = Some("accruing-interest-notification-subheading")
          )
          @paragraphBody(
              message = messages(s"homepage.dna.accruingInterest$maybeAgentKey.body"),
              id = Some("accruing-interest-notification-body")
          )
          @paragraphBodyLink(
              message = messages("homepage.dna.accruingInterest.linkText"),
              linkUrl = viewOutstandingPaymentsUrl,
              linkId = Some("accruing-interest-notification-link")
          )
      }
  }
  case DynamicNotificationAreaState.OutstandingPaymentsWithBtn(amountOwed) => {
      @notificationWrapper {
          @h2(
              message = messages(s"homepage.dna.outstandingPaymentsWithBtn$maybeAgentKey.title", formatAmount(amountOwed)),
              size = "s",
              id = Some("outstanding-payments-btn-notification-subheading")
          )
          @paragraphBody(
              message = messages(s"homepage.dna.outstandingPaymentsWithBtn$maybeAgentKey.body"),
              id = Some("outstanding-payments-btn-notification-body")
          )
          @paragraphBodyLink(
              message = messages("homepage.dna.outstandingPaymentsWithBtn.linkText"),
              linkUrl = viewOutstandingPaymentsUrl,
              linkId = Some("outstanding-payments-btn-notification-link")
          )
      }
  }
  case DynamicNotificationAreaState.OutstandingPayments(amountOwed) => {
      @notificationWrapper {
          @h2(
              message = messages(s"homepage.dna.outstandingPayments$maybeAgentKey.title", formatAmount(amountOwed)),
              size = "s",
              id = Some("outstanding-payments-notification-subheading")
          )
          @paragraphBodyLink(
              message = messages("homepage.dna.outstandingPayments.linkText"),
              linkUrl = viewOutstandingPaymentsUrl,
              linkId = Some("outstanding-payments-notification-link")
          )
      }
  }
  case returnExpected: DynamicNotificationAreaState.ReturnExpectedNotification => {
      @defining(
          returnExpected match {
              case DynamicNotificationAreaState.ReturnExpectedNotification.Due => "due"
              case DynamicNotificationAreaState.ReturnExpectedNotification.Overdue => "overdue"
              case DynamicNotificationAreaState.ReturnExpectedNotification.Incomplete => "incomplete"
          }
      ){ scenarioKey => @notificationWrapper {
          @h2(
              message = messages(s"homepage.dna.returnExpected$maybeAgentKey.$scenarioKey.title"),
              size = "s",
              id = Some("return-expected-notification-subheading")
          )
          @paragraphBody(
              message = messages(s"homepage.dna.returnExpected$maybeAgentKey.$scenarioKey.body"),
              id = Some("return-expected-notification-body")
          )
          @paragraphBodyLink(
              message = messages("homepage.dna.returnExpected.linkText"),
              linkUrl = dueAndOverdueReturnsUrl,
              linkId = Some("return-expected-notification-submission-link")
          )
      }}
  }
  case DynamicNotificationAreaState.NoNotification => {}
}
